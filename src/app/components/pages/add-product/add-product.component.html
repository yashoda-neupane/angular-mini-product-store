<div class="container my-4">
    <h2 class="mb-3">Add New Product</h2>
    <form [formGroup]="productForm" (ngSubmit)="onSubmit()" novalidate>
      <div class="mb-3">
        <label for="title" class="form-label">Title</label>
        <input
          id="title"
          class="form-control"
          formControlName="title"
          placeholder="Enter product title"
          [class.is-invalid]="isFieldInvalid('title')"
        >
        @if (isFieldInvalid('title')) {
          <div class="invalid-feedback">
            @if (productForm.get('title')?.errors?.['required']) {
              <span>Title is required</span>
            }
          </div>
        }
      </div>

      <div class="mb-3">
        <label for="price" class="form-label">Price</label>
        <input
          id="price"
          type="number"
          step="0.01"
          class="form-control"
          formControlName="price"
          placeholder="Enter price"
          [class.is-invalid]="isFieldInvalid('price')"
        >
        @if (isFieldInvalid('price')) {
          <div class="invalid-feedback">
            @if (productForm.get('price')?.errors?.['required']) {
              <span>Price is required</span>
            }
            @if (productForm.get('price')?.errors?.['min']) {
              <span>Price must be greater than or equal to 0</span>
            }
          </div>
        }
      </div>

      <div class="mb-3">
        <label for="description" class="form-label">Description</label>
        <textarea
          id="description"
          class="form-control"
          formControlName="description"
          placeholder="Enter description"
          [class.is-invalid]="isFieldInvalid('description')"
        ></textarea>
        @if (isFieldInvalid('description')) {
          <div class="invalid-feedback">
            @if (productForm.get('description')?.errors?.['required']) {
              <span>Description is required</span>
            }
          </div>
        }
      </div>

      <div class="mb-3">
        <label for="category" class="form-label">Category</label>
        <input
          id="category"
          class="form-control"
          formControlName="category"
          placeholder="Enter category"
          [class.is-invalid]="isFieldInvalid('category')"
        >
        @if (isFieldInvalid('category')) {
          <div class="invalid-feedback">
            @if (productForm.get('category')?.errors?.['required']) {
              <span>Category is required</span>
            }
          </div>
        }
      </div>

      <div class="mb-3">
        <label for="image" class="form-label">Image URL</label>
        <input
          id="image"
          class="form-control"
          formControlName="image"
          placeholder="Enter image URL (e.g., https://example.com/image.jpg)"
          [class.is-invalid]="isFieldInvalid('image')"
        >
        @if (isFieldInvalid('image')) {
          <div class="invalid-feedback">
            @if (productForm.get('image')?.errors?.['required']) {
              <span>Image URL is required</span>
            }
            @if (productForm.get('image')?.errors?.['pattern']) {
              <span>Please enter a valid URL (e.g., https://example.com)</span>
            }
          </div>
        }
      </div>

      <button
        type="submit"
        class="btn btn-primary"
        [disabled]="productForm.invalid || isSubmitting"
      >
        {{ isSubmitting ? 'Adding...' : 'Add Product' }}
      </button>
    </form>
  </div>